<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YeuCau6</title>
</head>
<body>
<script>

    let Customer = function () {
        this.name = "";
        this.email = "";
        this.idCard = "";
        this.birthday = "";
        this.numberOfPeople = 0;
        this.typeOfRoom = "";
        this.rentDay = 0;
        this.typeCustomer = "";
        this.address = "";
        this.discount = 0;
        this.typeService = "";
        this.listCustomers = [];

        this.getName = function () {
            return this.name;
        };
        this.setName = function (name) {
            this.name = name;
        };
        this.getEmail = function () {
            return this.email;
        };
        this.setEmail = function (email) {
            this.email = email;
        };
        this.getIdCard = function () {
            return this.idCard;
        };
        this.setIdCard = function (idCard) {
            this.idCard = idCard;
        };
        this.getBirthday = function () {
            return this.birthday;
        };
        this.setBirthday = function (birthday) {
            this.birthday = birthday;
        };
        this.getNumOfPeoPle = function () {
            return this.numberOfPeople;
        }
        this.setNumOfPeoPle = function (numberOfPeoPle) {
            this.numberOfPeople = numberOfPeoPle;
        };
        this.getTypeOfRoom = function () {
            return this.typeOfRoom;
        };
        this.setTypeOfRoom = function (typeRoom) {
            this.typeOfRoom = typeRoom;
        };
        this.getRentDay = function () {
            return this.rentDay;
        };
        this.setRentDay = function (rentDay) {
            this.rentDay = rentDay;
        };
        this.getTypeCustomer = function () {
            return this.typeCustomer;
        };
        this.setTypeCustomer = function (typeCustomer) {
            this.typeCustomer = typeCustomer;
        };
        this.getAddress = function () {
            return this.address;
        };
        this.setAddress = function (address) {
            this.address = address;
        };
        this.getDiscount = function () {
            return this.discount;
        };
        this.setDiscount = function (discount) {
            this.discount = discount;
        };
        this.getTypeService = function () {
            return this.typeService;
        };
        this.setTypeService = function (typeService) {
            this.typeService = typeService;
        };

        this.totalPay = function () {
            let money = 0;
            if (this.typeOfService === "Villa") {
                money = 500 * this.rentDay * (1 - this.discount / 100);
            } else if (this.typeOfService === "House") {
                money = 300 * this.rentDay * (1 - this.discount / 100);
            } else
                money = 100 * this.rentDay * (1 - this.discount / 100);
            return money;
        };
        let validateBtd = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
        let checkMail = /^[A-Za-z0-9]+[A-Za-z0-9]*@[A-Za-z0-9]+(\.[A-Za-z0-9]+)$/;
        this.addNewCustomer = function () {

            cu = new Customer();
            cu.setName(prompt("Input Name : "));
            cu.setIdCard(prompt("ID : "));

            let testBTD = false;
            do {
                let btd = prompt("Day of Birth : ");
                if (validateBtd.test(btd)) {
                    cu.setBirthday(btd);
                    testBTD = true;
                } else {
                    alert("invalid!!! input again");
                    testBTD = false;
                }
            } while (!testBTD);
            let testM = false;
            do {
                let email = prompt("Email :");
                if (checkMail.test(email)) {
                    cu.setEmail(email);
                    testM = true;
                } else {
                    alert("invalid!!! input again");
                    testM = false;
                }
            } while (!testM);

            cu.setAddress(prompt("Address :"));
            cu.setDiscount(prompt("Discount : " + "\n" + "Input 0 - 100"));
            cu.setNumOfPeoPle(prompt("Number People : "));
            cu.setRentDay(prompt("Rent Day : "));
            cu.setTypeCustomer(prompt("Type of customer : "));
            cu.setTypeService(prompt("Type of Service : " + " \n" + " Villa" + " \n" + " House" + " \n" + " Room"));
            cu.setTypeOfRoom(prompt("Type of Room : " + " \n" + " Vip" + " \n" + " Business" + " \n" + " Normal"));
            cu.totalPay();
            this.listCustomers.push(cu);
        };
        this.displayCustomer = function () {
            for (let i = 0; i < this.listCustomers.length; i++) {
                alert("Customer " + (i + 1) + " :" + this.listCustomers[i].getName() + "\n"
                    + " - " + this.listCustomers[i].getIdCard() + "\n"
                    + " - " + this.listCustomers[i].getBirthday() + "\n"
                    + " - " + this.listCustomers[i].getEmail() + "\n"
                    + " - " + this.listCustomers[i].getAddress() + "\n"
                    + " - " + this.listCustomers[i].getDiscount() + "\n"
                    + " - " + this.listCustomers[i].getNumOfPeoPle() + "\n"
                    + " - " + this.listCustomers[i].getRentDay() + "\n"
                    + " - " + this.listCustomers[i].getTypeService() + "\n"
                    + " - " + this.listCustomers[i].getTypeCustomer() + "\n"
                    + " - " + this.listCustomers[i].getTypeOfRoom() + "\n "
                    + " - " + this.listCustomers[i].totalPay()
                );
            }
        };
        this.displayNameId = function () {
            let str = "";
            for (let i = 0; i < this.listCustomers.length; i++) {
                str +=(i + 1) + " : " + this.listCustomers[i].getName() + "\n";
            }
            return str;
        };
        this.deleteCustomer = function (i) {
            this.listCustomers.splice(i, 1);
        }
        this.displayOneCustomer = function (i) {
            let str =
                "Customer " + (i + 1) + " :"
                + "\n1" + this.listCustomers[i - 1].getName() + "\n"
                + "2 :" + this.listCustomers[i - 1].getIdCard() + "\n"
                + "3 :" + this.listCustomers[i - 1].getBirthday() + "\n"
                + "4 :" + this.listCustomers[i - 1].getEmail() + "\n"
                + "5 :" + this.listCustomers[i - 1].getAddress() + "\n"
                + "6 :" + this.listCustomers[i - 1].getDiscount() + "\n"
                + "7 :" + this.listCustomers[i - 1].getNumOfPeoPle() + "\n"
                + "8 :" + this.listCustomers[i - 1].getRentDay() + "\n"
                + "9 :" + this.listCustomers[i - 1].getTypeService() + "\n"
                + "10 :" + this.listCustomers[i - 1].getTypeCustomer() + "\n"
                + "11 :" + this.listCustomers[i - 1].getTypeOfRoom() + "\n"
                + "12 :" + this.listCustomers[i - 1].totalPay();
            return str;
        };
        this.editCustomer = function (i, j) {
            switch (j) {
                case "1" :
                    this.listCustomers[i - 1].setName(prompt("Change name : " + this.listCustomers[i - 1].getName()));
                    break;
                case "2" :
                    this.listCustomers[i - 1].setIdCard(prompt("Change Id Card : " + this.listCustomers[i - 1].getIdCard()));
                    break;
                case "3" :
                    this.listCustomers[i - 1].setBirthday(prompt("Change Birthday : " + this.listCustomers[i - 1].getBirthday()));
                    break;
                case "4" :
                    this.listCustomers[i - 1].setEmail(prompt("Change Email : " + this.listCustomers[i - 1].getEmail()));
                    break;
                case "5" :
                    this.listCustomers[i - 1].setAddress(prompt("Change Address : " + this.listCustomers[i - 1].getAddress()));
                    break;
                case "6" :
                    this.listCustomers[i - 1].setDiscount(prompt("Change discount : " + this.listCustomers[i - 1].getDiscount()));
                    break;
                case "7" :
                    this.listCustomers[i - 1].setNumOfPeoPle(prompt("Change number of people : " + this.listCustomers[i - 1].getNumOfPeoPle()));
                    break;
                case "8" :
                    this.listCustomers[i - 1].setRentDay(prompt("Change rent day : " + this.listCustomers[i - 1].getRentDay()));
                    break;
                case "9" :
                    this.listCustomers[i - 1].setTypeService(prompt("Change type of service : " + this.listCustomers[i - 1].getTypeService()));
                    break;
                case "10" :
                    this.listCustomers[i - 1].setTypeCustomer(prompt("Change Type Of Customer : " + this.listCustomers[i - 1].getTypeCustomer()));
                    break;
                case "11" :
                    this.listCustomers[i - 1].setTypeOfRoom(prompt("Change Type of room : " + this.listCustomers[i - 1].getTypeOfRoom()));
                    break;
                default:
                    alert("invalid number");
                    break;
            }
        };

    };
    let c = new Customer();

    function menu() {
        let t = true;
        do {
            let input = prompt("Please choose option you want : "
                + "\n1. Add new customer "
                + "\n2. Display information customer"
                + "\n3. Display total Pay of customer"
                + "\n4. Edit information customer"
                + "\n5. Delete customer"
                + "\n6. Exit");
            switch (input) {
                case "1":
                    c.addNewCustomer();
                    t = false;
                    break;
                case "2":
                    if (c.listCustomers[0] === undefined)
                        alert("Data not exist");
                    else{
                        let testQ = false;
                        do {
                            let p = prompt(c.displayNameId());
                            if(p==="x")
                                testQ = true;
                            else
                                alert(c.displayOneCustomer(p));
                        }while (!testQ);
                    }
                        t = false;
                    break;
                case "3":
                    if (c.listCustomers[0] === undefined)
                        alert("Data not exist");
                    else {
                        let idTT = false;
                        do {
                            let inp = prompt("" + c.displayNameId());
                            if (inp === "x")
                                idTT = true;
                            else {
                                alert("Total Pay of " + c.listCustomers[inp - 1].getName() + "\n" + c.listCustomers[inp - 1].totalPay());
                                idTT = false;
                            }
                        } while (!idTT);
                    }

                    t = false;
                    break;
                case "4":
                    if (c.listCustomers[0] === undefined)
                        alert("Data not exist");
                    else {
                        let idC = false;
                        do {
                            let inp = prompt("" + c.displayNameId());
                            if (inp === "x")
                                idC = true;
                            else {
                                let inpT = prompt(c.displayOneCustomer(inp));
                                c.editCustomer(inp, inpT);
                                alert(c.displayOneCustomer(inp));
                                idC = false;
                            }
                        } while (!idC);
                    }
                    t = false;
                    break;
                case "5":
                    if (c.listCustomers[0] === undefined)
                        alert("Data not exist");
                    else {
                        let idDele = false;
                        do {
                            let a = prompt(c.displayNameId());
                            if (a === "x")
                                idDele = true;
                            else {
                                c.deleteCustomer(a - 1);
                                alert(c.displayNameId());
                            }
                        } while (!idDele);
                    }

                    t = false;
                    break;
                case "6":
                    t = true;
                    break;
                default:
                    alert("notThing");
            }
        } while (!t);
    }

    menu();
</script>
</body>
</html>